## 호이스팅이란?

호이스팅은 변수 선언이 스코프의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징을 말합니다.<br><br>

---

## 함수 선언문과 함수 표현식에서의 호이스팅 차이는?

- **함수 선언문의 호이스팅 (함수 호이스팅)**

  모든 선언문이 그렇듯 함수 선언문도 코드가 한 줄씩 순차적으로 실행되는 시점인 런타임 이전에 자바스크립트 엔진에 의해 먼저 실행됩니다. 즉, 함수 선언문으로 함수를 정의하면 런타임 이전에 함수 객체가 먼저 생성됩니다. 그리고 자바스크립트 엔진은 함수 이름과 동일한 이름의 식별자를 암묵적으로 생성하고 생성된 함수 객체를 할당합니다.

  즉, 코드가 한 줄씩 순차적으로 실행되기 시작하는 런타임에는 이미 함수 객체가 생성되어 있고 함수 이름과 동일한 식별자에 할당까지 완료한 상태가 됩니다. 따라서 함수 선언문 이전에 함수를 참조할 수 있으며, 호출할 수도 있습니다.

  이처럼, **함수 선언문이 코드의 선두로 끌어 올려진 것처럼 동작하는 자바스크립트 고유의 특징을 함수 호이스팅**이라고 합니다. <br>
  <br>

- **함수 표현식의 호이스팅(변수 호이스팅)**
  함수 표현식은 변수에 할당되는 값이 함수 리터럴인 문입니다. 그래서 함수 표현식은 변수 선언문과 변수 할당문을 한 번에 기술한 축약 표현과 동일하게 동작합니다. 변수 선언은 런타임 이전에 실행되어 undefined로 초기화 되지만, 변수 할당문의 값은 할당문이 실행되는 시점, 즉 런타임에 평가되므로 함수 표현식의 함수 리터럴도 할당문이 실행되는 시점에 평가되어 함수 객체가 됩니다.
  따라서, **함수 표현식으로 함수를 정의하면 함수 호이스팅이 발생하는 것이 아니라 변수 호이스팅이 발생**하게 됩니다.<br><br>

---

## 같은 이름의 var 변수 선언과 함수 선언문의 호이스팅은 어떻게 일어나는가?

```javascript
var sayHi = "Hi!"; // 1. 값을 할당 했을 때
var sayBye; // 2. 값을 할당하지 않았을 때

function sayHi() {
  // 같은 이름의 함수 선언
  console.log("sayHi");
}

function sayBye() {
  // 같은 이름의 함수 선언
  console.log("sayBye");
}

console.log(typeof sayHi); // > "string"
console.log(typeof sayBye); // > "function"
```

var 변수 선언과 함수 선언문은 var 변수에 값을 할당 했을 때와 할당하지 않았을 때, 2가지 경우로 나뉩니다.

먼저 값을 할당했을 경우와 할당하지 않았을 경우 모두,
var sayHi와 var sayBye, 그리고 function sayHi와 function sayBye 순으로 런타임 이전에 선언이 됩니다.

런타임 이후, sayHi에 Hi 라는 값이 할당되기 때문에, console.log로 sayHi를 호출했을 때, string을 리턴하게 되고, sayBye의 경우에는 아무런 값이 할당되지 않기 때문에 console.log로 sayBye를 호출하면, function을 리턴하게 됩니다.<br><br>

---

## 변수의 생성 과정

- **var 키워드 변수**
  var 키워드 변수는 런타임 이전에 선언 단계와 초기화 단계가 동시에 진행됩니다. 즉, 자바스크립트 실행 컨텍스트에 변수를 등록하는 동시에 undefined로 만들어버리게됩니다. 그래서 변수에 값이 할당되기 전에 호출을 해도, Reference Error가 발생하지 않고, undefined가 리턴됩니다.

- **let, const 키워드 변수**
  let, const 키워드는 var 키워드와 다르게 선언 단계와 초기화 단계가 분리되어 진행됩니다. 실행 컨텍스트에 변수를 등록했지만, 메모리에 할당되지 않아 접근할 수 없습니다. 그래서 Reference Error가 발생하게 됩니다.
  즉, 호이스팅이 발생하지 않는 것이 아니라, 호이스팅이 되었지만, 메모리가 할당되지 않아서 접근할 수 없는 것이기 때문입니다. 이 때 이들은 어디로 가느냐? 일시적 사각지대로 가게 됩니다.
  - 일시적 사각지대(TDZ)란?<br>
    스코프 시작 지점부터 초기화 시작 지점까지 변수를 참조할 수 없는 구간을 의미합니다.<br>
    <br>

---

### [ 참고자료 ]

모던 자바스크립트 Deep dive
