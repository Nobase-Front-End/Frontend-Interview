# 프로토타입 체인과 스코프 체인

## Q1. 프로토타입 체인과 스코프 체인에 대해 설명해주세요
---

- 프로토타입 체인은 객체가 자신이 직접 소유하지 않은 프로퍼티를 참조할 수 있도록 하는 것으로, 상속을 위해 사용합니다.
	- 상속해줄 프로퍼티는 생성자 함수와 짝을 이루는 프로토타입 객체가 가지고 있으며, 내부슬롯 `[[prototype]]`을 통해 상위 프로토타입 객체를 참조하며 체인을 형성합니다.
- 스코프 체인은 스코프가 계층적으로 연결된 것으로 식별자 결정을 위해 사용합니다.
	- 식별자는 실행 컨텍스트와 함께 생성되는 렉시컬 환경의 환경 레코드에 존재하며, 렉시컬 환경의 외부 렉시컬 환경 참조에 의해 체인을 형성합니다.


## Q2. 둘의 공통점과 차이점에 대해 설명해주세요
---

### 공통점
- 먼저 둘 모두 효율적인 프로그래밍을 가능하게 합니다. 체인을 통해 외부 값을 참조할 수 있기 때문에 필요한 값을 중복생성하지 않고 사용할 수 있습니다.
- 다음으로 두 체인 모두 단방향으로 이어집니다. 하위요소에서 상위 요소의 식별자/프로퍼티를 참조하는 것은 가능하지만 그 반대는 불가능하기 때문에 순환참조에 빠지지 않으며, 하위 요소에서 필요에 따라 새로운 값을 같은 이름으로 덮어씌워 사용할 수 있습니다.  

### 차이점
- 스코프 체인은 함수 또는 블록의 생성 위치에 따라 자동으로 결정되며 변경할 수 없지만, 프로토타입 체인은 직접 설정할 수도 있고, 나중에 변경하는 것도 가능합니다.
	 - 먼저 `Object.create()`함수를 사용해 객체를 생성할 경우 프로토타입 객체를 직접 설정할 수 있습니다. 따라서 같은 위치에서 생성한 동일한 형태의 객체도 서로 다른 프로토타입 체인을 가질 수 있습니다. 그리고 `Object.setPrototype()`함수를 사용하면 객체 생성 이후에도 원하는 시점에 프로토타입을 변경할 수 있습니다.


## Bonus. 프로토타입 체인과 스코프 체인이 만나는 곳
---

- 기본적으로 프로토타입 체인과 스코프 체인은 독립적으로 존재하며 서로 다른 역할을 수행합니다. 식별자 검색은 스코프 체인이, 프로퍼티 검색은 프로토타입 체인이 담당합니다. 그러나 전역 객체의 프로퍼티는 예외적으로 스코프 체인을 통해 접근할 수 있습니다. 
- 스코프 체인의 종점인 전역 렉시컬 환경의 환경 레코드는 `객체 환경 레코드`와 `선언적 환경 레코드`로 구성되어 있습니다. 이때 `var`키워드로 선언한 전역 변수와 함수 선언문으로 정의된 전역 함수는 객체 환경 레코드에 등록되는데, 객체 환경 레코드가 전역 객체와 연결되어 있기 때문에 전역 객체의 프로퍼티와 메서드가 됩니다.
- 따라서 식별자 검색 과정에서 스코프 체인의 종점에 다다르면 선언적 환경 레코드의 식별자뿐만 아니라 객체 환경 레코드로 연결된 전역 객체의 프로퍼티까지 참조하게 됩니다. 이것이 전역 객체의 프로퍼티를 참조할 때 `window.`을 생략할 수 있는 이유입니다. 우리가 흔히 사용하는 `document`, `console`, `setTimeout` 등은 모두 전역 객체의 프로퍼티이지만, 위와 같은 과정을 거치기 때문에 `window.console.log()`와 같이 프로퍼티로 접근하지 않아도`console.log`로 식별자처럼 사용할 수 있습니다.